# 向量数据库

[原文链接](https://mp.weixin.qq.com/s/28-YxNpK97EA1EhIgzKCjA) 向量数据库解读

## Embedding

* 将非结构化数据转化为计算机能够高效处理的形式，捕捉其语义本质
* 现代Embedding模型能够将原始数据（无论是文本、图像还是音频）转换为一组向量数据，从而使得语义相似的概念在几何空间中拥有更相近的距离
* 多模态领域
  * 通过文本描述检索相似图像；
  * 根据音频片段查找相关文档；
  * 结合多种模态数据实现联合语义理解

## 功能

* 向量嵌入
* 专用索引
* 距离度量
  * 欧氏距离：直线距离
  * 余弦相似度：向量夹角的余弦值（文本数据）
  * 点积：反映两个归一化数据的对齐程度
  * 曼哈顿距离：计算各坐标绝对差值的总和
* 优势
  * 相似性搜索
  * 高维数据处理（NLP、CV等）
  * 可拓展性
  * 数据表示灵活
  * 实时查询

## 基础设计

* 标准：
  * 硬件感知
  * 搜索算法
  * 列式存储
* 架构
  * **存储层（Storage Layer）：** 负责对向量数据和相关元数据进行持久存储，采用专用的编码和压缩策略，并针对向量数据的特定访问模式优化输入/输出（I/O）操作。
  * **索引层（Index Layer）：** 维护多种索引算法，负责索引的构建、更新与优化，并通过硬件相关的优化技术提升查询性能。
  * **查询层（** **Query**** Layer）：** 负责处理进入的查询请求，确定具体的执行策略，处理查询结果，并通过缓存机制优化重复查询的响应速度。
  * **服务层（Service Layer）：** 管理客户端连接和请求路由，提供监控与日志记录功能，同时实现安全策略和多租户支持，确保系统在复杂环境下稳定运行。
* 加分项
  * 确保数据一致性
  * 权限控制、安全措施、多用户
  * 丰富的索引算法
    * 图算法
    * 量化技术
    * 磁盘索引
    * 专用索引
  * 高级的查询能力
    * 近似最近邻（Approximate Nearest Neighbor，ANN）
      * 查询向量
      * 索引结构
      * 相似性度量
      * Top-K结果
    * 控制结果相似度
    * 条件过滤搜索
    * 文本匹配
    * 分组搜索
      * **文档检索系统：** 确保搜索结果来自不同文章，而非同一篇文章的多个段落。
      * **推荐系统：** 避免推荐过多相似内容，提升推荐的广度。
      * **搜索系统：** 兼顾相似度和多样性，让结果更均衡。
    * 混合搜索
      * **稀疏-密集向量结合（Sparse-Dense Fusion）：** 结合关键词匹配（稀疏向量）和语义理解（密集向量），提升文本搜索质量。
      * **多模态搜索（Multimodal Search）：** 允许用户同时使用文本、图像等不同输入方式进行搜索，例如“上传一张图片并输入描述”来查找相似商品。
    * 全文搜索

## 技术指标

* 召回率、吞吐量平衡
  * 使用测试框架
* 内存管理优化
  * 动态资源分配
  * 缓存
  * 向量压缩
* 过滤查询和混合搜索
  * 预过滤：先过滤、再查询
  * 后过滤：先查询、再过滤
  * 元数据索引
  * 多向量查询
  * 负向量查询

## 应用

* 大模型、知识库
* NLP
* CV
* 基因组学
* 推荐系统
* 聊天机器人
* 金融
