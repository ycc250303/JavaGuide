此文件用于查漏补缺

## 自查

* 元组、码、候选码、主码、外码、主属性、非主属性概念？
* ER图概念？
* 123范式？
* 函数依赖、部分函数依赖、完全函数依赖、传递函数依赖？

## 为何不推荐使用外键和级联？

* 外键缺点：

  * **增加了复杂性：** a. 每次做 DELETE 或者 UPDATE 都必须考虑外键约束，会导致开发的时候很痛苦, 测试数据极为不方便; b. 外键的主从关系是定的，假如哪天需求有变化，数据库中的这个字段根本不需要和其他表有关联的话就会增加很多麻烦。
  * **增加了额外工作** ：数据库需要增加维护外键的工作，比如当我们做一些涉及外键字段的增，删，更新操作之后，需要触发相关操作去检查，保证数据的的一致性和正确性，这样会不得不消耗数据库资源。如果在应用层面去维护的话，可以减小数据库压力；
  * **对分库分表不友好** ：因为分库分表下外键是无法生效的。

  ![1760275076020](image/基础知识/1760275076020.png)
* 外键好处：

  * 保证了数据库数据的一致性和完整性；
  * 级联操作方便，减轻了程序代码量；
  * 如果系统不涉及分库分表，并发量不是很高的情况还是可以考虑使用外键的。

![1760275116756](image/基础知识/1760275116756.png)

## drop、delete、truncate区别

* `drop`(丢弃数据): `drop table 表名` ，直接将表都删除掉，在删除表的时候使用。
* `truncate` (清空数据) : `truncate table 表名` ，只删除表中的数据，再插入数据的时候自增长 id 又从 1 开始，在清空表中数据的时候使用。
* `delete`（删除数据） : `delete from 表名 where 列名=值`，删除某一行的数据，如果不加 `where` 子句和 `truncate table 表名`作用类似。
* `truncate` 和 `drop` 属于 DDL(数据定义语言)语句，操作立即生效，原数据不放到 rollback segment 中，不能回滚，操作不触发 trigger。而 `delete` 语句是 DML (数据库操作语言)语句，这个操作会放到 rollback segment 中，事务提交之后才生效。

## 数据库设计步骤

* **需求分析** : 分析用户的需求，包括数据、功能和性能需求。
* **概念结构设计** : 主要采用 E-R 模型进行设计，包括画 E-R 图。
* **逻辑结构设计** : 通过将 E-R 图转换成表，实现从 E-R 模型到关系模型的转换。
* **物理结构设计** : 主要是为所设计的数据库选择合适的存储结构和存取路径。
* **数据库实施** : 包括编程、测试和试运行
* **数据库的运行和维护** : 系统的运行与数据库的日常维护。

## 刷题杂项

* MySQL不支持 `outer join`需要使用 `left join`和 `right join`再用 `union`去重
* 在使用 `UNION` 时：`ORDER BY` 只能出现在  **整个 UNION 查询的最后一部分** ，不能出现在每个子查询内部。
